---
title: TCP/IP 5 Layer
date: 2022-11-14 10:13:19
category: 카테고리
tag: [Networking, CS]
series: Computer Networking a Top-Down Apporach
excerpt: "What is TCP/IP 5 Layer and introduction of Computer Networking a Top-Down Approach"
cover_image: /images/posts/networking.jpg
draft: true
---

## 왜 네트워크를 배워야 하는가?

애플리케이션을 제작하면 필연적으로 네트워킹을 마주하게 된다.
각 라이브러리나 프레임워크는 튜토리얼이 존재하고 이를 그대로 따라하는 것만으로도 네트워크 통신이 가능하다.
그렇지만 코드 뒤에 숨겨진 네트워크 작동 원리까진 설명해주지 않는다.
원리를 모른채로 사용하기 때문에 어떤 선택지가 존재하며, 각 방법의 장단점을 알 수 없게 된다.
그러므로 간단하게 통신 기능을 사용해봤다면, 그 다음으로 이론을 학습하는 것이 중요한 것이다.

이 시리즈는 *Computer Networking a Top-Down Approach*라는 책을 근간으로 정리한 것이다.
처음에는 책을 간단하게 요약한 내용을 적을까 했지만 몇가지 문제점 때문에 포스트로 정리하기로 했다.
책의 문제점은 Top-Down 접근법을 따랐다는 점이다.
학습하다보면 때로는 중간 내용을 먼저 아는 것이 좋을 때도 있고, 어떤 내용은 생략할 필요가 있다.
하지만 전공서적은 그 특성상 같은 주제를 한 챕터에 모아야 하기도 하고, 최대한 자세하고 다양한 내용을 다뤄야 한다.
나는 이 방법이 비효율적이라 생각해서 순서를 새로 정리했다.
또한 책 원문이 미국을 기준으로 작성되어서 예시가 그다지 와닿지 않아 이를 수정하기로 했고, 문장이 이해하기 어렵게 구성되거나 번역이 아쉬운 내용도 다시 적어보려고 한다.

## TCP/IP 5 Layer

네트워크의 가장 핵심적인 아이디어는 네트워크를 계층으로 나눈 것이다.
여기서 계층이 무엇이며 왜 필요한지 알기 위해선 데이터가 네트워크 경로를 따라 상대 컴퓨터에 어떻게 도착하는지 알아야 한다.
하지만 우리는 아직 네트워크의 출발점에 있기에 위 과정이 불가능하다.
계층을 나중에 설명하자니 너무나 핵심적인 아이디어라 뒤로 미룰 수도 없다.
그래서 네트워크와 비슷한 구조를 가진 현실의 모델을 가지고 설명해보겠다.
나는 그 중에서도 택배 배송을 예시로 들어서 설명하겠다.

A가 B에게 택배를 보내려고 한다.
A는 우체국1에 택배를 맡기고, 우체국은 이를 택배 기사에게 넘겨준다.
그리고 우체국2에 도착한 택배를 B에게 전달한다.

```
+--------------+
|      A       |
|      ↓       |
| Post Office1 |
|      ↓       |
|   Courier    |
|      ↓       |
| Post Office2 |
|      ↓       |
|      B       |
+--------------+
```

여기서 재밌는 점이 있는데 A는 택배 배송을 우체국1에게 맡기고 아무 일도 하지 않는다는 것이다.
A는 택배가 B에게 전달되는 것만 명시할 뿐, 그 사이어 어떤 우체국을 거쳐야 하며 어떤 택배기사가 배송해야할지 정하지 않는다.
이들은 우체국1에서 알아서 정해줄 뿐이다.
A 입장에서는 사이 단계를 알지 못하며 단지 B가 받게 된다는 사실만 안다.
그 결과 A와 B는 사이에 어떤 통로를 두고 소통하는 형태가 된다.

```
+--------------+
|      A       |
|      ↓       |
|     ???      |
|      ↓       |
|      B       |
+--------------+
```

우체국 입장에서도 비슷한 결과가 나온다.
우체국1은 우체국2로 배송하기만 하면 된다.
그 사이에서 어떤 기사가 배달해야 하며, 또 어떤 경로로 배달할지는 신경쓰지 않는다.
그래서 어디로 가야할지 목적지만 정해줄 뿐이며, 그 사이의 일은 택배원에게 전적으로 맡긴다.
뿐만 아니라 A와 B에 관한 정보도 알 필요가 없는 것이, 필요한 정보는 모두 송장에 적혀있다.

```
+--------------+
| Post Office1 |
|      ↓       |
|     ???      |
|      ↓       |
| Post Office2 |
+--------------+
```

마지막으로 택배 기사 역시 우체국1에서 우체국2로 전달한다는 내용만 알고 있으면 된다.
그 외에 A나 B에게 명령 받는 내용도 없고, 경로 역시 본인이 가장 빠르다고 생각되는 경로로 전달하기만 하면 된다.

택배 배송의 예에서 알 수 있듯이 상대방에 대한 정보 외에는 그다지 필요가 없다.
또한 일을 위임시킬 뿐 그 사이에 어떻게 동작할지 직접적으로 지정하는 것도 불가능하다.
지금까지의 구조로 보아 택배 배송은 아래처럼 표시하는 것이 더 적절하다.

```
+--------------+--------------+
|      A              B       |
+--------------+--------------+
|      ↓              ↑       |
| Post Office1   Post Office2 |
|      ↘              ↗       |
+--------------+--------------+
|            Courier          |
+--------------+--------------+
```

위에서 보듯이 서로 소통할 수 있는 대상 끼리는 같은 층에 두었다.
그리고 각 층은 아래 층에 해야할 일을 위임하며, 목적지는 지정할 수 있지만 자세한 명령을 할 수 없다.
네트워크에서도 위와 같은 구조를 사용하는데 각 층을 계층이라고 부른다.
각 계층은 아래 계층에 네트워크 전송을 위임하므로 사이에 어떤 전송 과정을 거치는지 알 수 없다.
